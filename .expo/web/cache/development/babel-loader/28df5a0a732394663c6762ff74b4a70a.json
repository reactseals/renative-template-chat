{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = createStyleResolver;\n\nvar _ExecutionEnvironment = require(\"fbjs/lib/ExecutionEnvironment\");\n\nvar _createCSSStyleSheet = _interopRequireDefault(require(\"./createCSSStyleSheet\"));\n\nvar _createCompileableStyle = _interopRequireDefault(require(\"./createCompileableStyle\"));\n\nvar _createOrderedCSSStyleSheet = _interopRequireDefault(require(\"./createOrderedCSSStyleSheet\"));\n\nvar _flattenArray = _interopRequireDefault(require(\"../../modules/flattenArray\"));\n\nvar _flattenStyle = _interopRequireDefault(require(\"./flattenStyle\"));\n\nvar _I18nManager = _interopRequireDefault(require(\"../I18nManager\"));\n\nvar _i18nStyle = _interopRequireDefault(require(\"./i18nStyle\"));\n\nvar _compile = require(\"./compile\");\n\nvar _initialRules = _interopRequireDefault(require(\"./initialRules\"));\n\nvar _modality = _interopRequireDefault(require(\"./modality\"));\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createStyleResolver() {\n  var inserted, sheet, cache;\n  var resolved = {\n    css: {},\n    ltr: {},\n    rtl: {},\n    rtlNoSwap: {} };\n\n\n  var init = function init() {\n    inserted = {\n      css: {},\n      ltr: {},\n      rtl: {},\n      rtlNoSwap: {} };\n\n    sheet = (0, _createOrderedCSSStyleSheet.default)((0, _createCSSStyleSheet.default)(_constants.STYLE_ELEMENT_ID));\n    cache = {};\n    (0, _modality.default)(function (rule) {\n      return sheet.insert(rule, _constants.STYLE_GROUPS.modality);\n    });\n\n    _initialRules.default.forEach(function (rule) {\n      sheet.insert(rule, _constants.STYLE_GROUPS.reset);\n    });\n  };\n\n  init();\n\n  function addToCache(className, prop, value) {\n    if (!cache[prop]) {\n      cache[prop] = {};\n    }\n\n    cache[prop][value] = className;\n  }\n\n  function getClassName(prop, value) {\n    var val = (0, _compile.stringifyValueWithProperty)(value, prop);\n    return cache[prop] && cache[prop].hasOwnProperty(val) && cache[prop][val];\n  }\n\n  function _injectRegisteredStyle(id) {\n    var doLeftAndRightSwapInRTL = _I18nManager.default.doLeftAndRightSwapInRTL,\n    isRTL = _I18nManager.default.isRTL;\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr';\n\n    if (!inserted[dir][id]) {\n      var style = (0, _createCompileableStyle.default)((0, _i18nStyle.default)((0, _flattenStyle.default)(id)));\n      var results = (0, _compile.atomic)(style);\n      Object.keys(results).forEach(function (key) {\n        var _results$key = results[key],\n        identifier = _results$key.identifier,\n        property = _results$key.property,\n        rules = _results$key.rules,\n        value = _results$key.value;\n        addToCache(identifier, property, value);\n        rules.forEach(function (rule) {\n          var group = _constants.STYLE_GROUPS.custom[property] || _constants.STYLE_GROUPS.atomic;\n          sheet.insert(rule, group);\n        });\n      });\n      inserted[dir][id] = true;\n    }\n  }\n\n\n\n\n\n  function resolve(style, classList) {\n    var nextClassList = [];\n    var props = {};\n\n    if (!style && !classList) {\n      return props;\n    }\n\n    if (Array.isArray(classList)) {\n      (0, _flattenArray.default)(classList).forEach(function (identifier) {\n        if (identifier) {\n          if (inserted.css[identifier] == null && resolved.css[identifier] != null) {\n            var item = resolved.css[identifier];\n            item.rules.forEach(function (rule) {\n              sheet.insert(rule, item.group);\n            });\n            inserted.css[identifier] = true;\n          }\n\n          nextClassList.push(identifier);\n        }\n      });\n    }\n\n    if (typeof style === 'number') {\n\n      _injectRegisteredStyle(style);\n\n      var key = createCacheKey(style);\n      props = _resolveStyle(style, key);\n    } else if (!Array.isArray(style)) {\n\n      props = _resolveStyle(style);\n    } else {\n\n\n\n      var flatArray = (0, _flattenArray.default)(style);\n      var isArrayOfNumbers = true;\n      var cacheKey = '';\n\n      for (var i = 0; i < flatArray.length; i++) {\n        var id = flatArray[i];\n\n        if (typeof id !== 'number') {\n          isArrayOfNumbers = false;\n        } else {\n          if (isArrayOfNumbers) {\n            cacheKey += id + '-';\n          }\n\n          _injectRegisteredStyle(id);\n        }\n      }\n\n      var _key = isArrayOfNumbers ? createCacheKey(cacheKey) : null;\n\n      props = _resolveStyle(flatArray, _key);\n    }\n\n    nextClassList.push.apply(nextClassList, props.classList);\n    var finalProps = {\n      className: classListToString(nextClassList),\n      classList: nextClassList };\n\n\n    if (props.style) {\n      finalProps.style = props.style;\n    }\n\n    return finalProps;\n  }\n\n\n\n\n\n  function _resolveStyle(style, key) {\n    var doLeftAndRightSwapInRTL = _I18nManager.default.doLeftAndRightSwapInRTL,\n    isRTL = _I18nManager.default.isRTL;\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr';\n\n    if (key != null && resolved[dir][key] != null) {\n      return resolved[dir][key];\n    }\n\n    var flatStyle = (0, _flattenStyle.default)(style);\n    var localizedStyle = (0, _createCompileableStyle.default)((0, _i18nStyle.default)(flatStyle));\n\n    var props = Object.keys(localizedStyle).sort().reduce(function (props, styleProp) {\n      var value = localizedStyle[styleProp];\n\n      if (value != null) {\n        var className = getClassName(styleProp, value);\n\n        if (className) {\n          props.classList.push(className);\n        } else {\n\n\n\n          if (styleProp === 'animationKeyframes' || styleProp === 'placeholderTextColor' || styleProp === 'pointerEvents' || styleProp === 'scrollbarWidth') {\n            var _atomic;\n\n            var a = (0, _compile.atomic)((_atomic = {}, _atomic[styleProp] = value, _atomic));\n            Object.keys(a).forEach(function (key) {\n              var _a$key = a[key],\n              identifier = _a$key.identifier,\n              rules = _a$key.rules;\n              props.classList.push(identifier);\n              rules.forEach(function (rule) {\n                sheet.insert(rule, _constants.STYLE_GROUPS.atomic);\n              });\n            });\n          } else {\n            if (!props.style) {\n              props.style = {};\n            }\n\n\n            props.style[styleProp] = value;\n          }\n        }\n      }\n\n      return props;\n    }, {\n      classList: [] });\n\n\n    if (props.style) {\n      props.style = (0, _compile.inline)(props.style);\n    }\n\n    if (key != null) {\n      resolved[dir][key] = props;\n    }\n\n    return props;\n  }\n\n  return {\n    getStyleSheet: function getStyleSheet() {\n      var textContent = sheet.getTextContent();\n\n      if (!_ExecutionEnvironment.canUseDOM) {\n        init();\n      }\n\n      return {\n        id: _constants.STYLE_ELEMENT_ID,\n        textContent: textContent };\n\n    },\n    createCSS: function createCSS(rules, group) {\n      var result = {};\n      Object.keys(rules).forEach(function (name) {\n        var style = rules[name];\n        var compiled = (0, _compile.classic)(style, name);\n        Object.keys(compiled).forEach(function (key) {\n          var _compiled$key = compiled[key],\n          identifier = _compiled$key.identifier,\n          rules = _compiled$key.rules;\n          resolved.css[identifier] = {\n            group: group || _constants.STYLE_GROUPS.classic,\n            rules: rules };\n\n          result[name] = identifier;\n        });\n      });\n      return result;\n    },\n    resolve: resolve,\n    sheet: sheet };\n\n}\n\n\n\n\n\nvar createCacheKey = function createCacheKey(id) {\n  var prefix = 'rn';\n  return prefix + \"-\" + id;\n};\n\nvar classListToString = function classListToString(list) {\n  return list.join(' ').trim();\n};\n\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/makenzis/Desktop/renative-template-chat-refactor/renative-template-chat/node_modules/react-native-web/dist/cjs/exports/StyleSheet/createStyleResolver.js"],"names":["exports","__esModule","default","createStyleResolver","_ExecutionEnvironment","require","_createCSSStyleSheet","_interopRequireDefault","_createCompileableStyle","_createOrderedCSSStyleSheet","_flattenArray","_flattenStyle","_I18nManager","_i18nStyle","_compile","_initialRules","_modality","_constants","obj","inserted","sheet","cache","resolved","css","ltr","rtl","rtlNoSwap","init","STYLE_ELEMENT_ID","rule","insert","STYLE_GROUPS","modality","forEach","reset","addToCache","className","prop","value","getClassName","val","stringifyValueWithProperty","hasOwnProperty","_injectRegisteredStyle","id","doLeftAndRightSwapInRTL","isRTL","dir","style","results","atomic","Object","keys","key","_results$key","identifier","property","rules","group","custom","resolve","classList","nextClassList","props","Array","isArray","item","push","createCacheKey","_resolveStyle","flatArray","isArrayOfNumbers","cacheKey","i","length","_key","apply","finalProps","classListToString","flatStyle","localizedStyle","sort","reduce","styleProp","_atomic","a","_a$key","inline","getStyleSheet","textContent","getTextContent","canUseDOM","createCSS","result","name","compiled","classic","_compiled$key","prefix","list","join","trim","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = createStyleResolver;\n\nvar _ExecutionEnvironment = require(\"fbjs/lib/ExecutionEnvironment\");\n\nvar _createCSSStyleSheet = _interopRequireDefault(require(\"./createCSSStyleSheet\"));\n\nvar _createCompileableStyle = _interopRequireDefault(require(\"./createCompileableStyle\"));\n\nvar _createOrderedCSSStyleSheet = _interopRequireDefault(require(\"./createOrderedCSSStyleSheet\"));\n\nvar _flattenArray = _interopRequireDefault(require(\"../../modules/flattenArray\"));\n\nvar _flattenStyle = _interopRequireDefault(require(\"./flattenStyle\"));\n\nvar _I18nManager = _interopRequireDefault(require(\"../I18nManager\"));\n\nvar _i18nStyle = _interopRequireDefault(require(\"./i18nStyle\"));\n\nvar _compile = require(\"./compile\");\n\nvar _initialRules = _interopRequireDefault(require(\"./initialRules\"));\n\nvar _modality = _interopRequireDefault(require(\"./modality\"));\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\n/**\n * WARNING: changes to this file in particular can cause significant changes to\n * the results of render performance benchmarks.\n */\nfunction createStyleResolver() {\n  var inserted, sheet, cache;\n  var resolved = {\n    css: {},\n    ltr: {},\n    rtl: {},\n    rtlNoSwap: {}\n  };\n\n  var init = function init() {\n    inserted = {\n      css: {},\n      ltr: {},\n      rtl: {},\n      rtlNoSwap: {}\n    };\n    sheet = (0, _createOrderedCSSStyleSheet.default)((0, _createCSSStyleSheet.default)(_constants.STYLE_ELEMENT_ID));\n    cache = {};\n    (0, _modality.default)(function (rule) {\n      return sheet.insert(rule, _constants.STYLE_GROUPS.modality);\n    });\n\n    _initialRules.default.forEach(function (rule) {\n      sheet.insert(rule, _constants.STYLE_GROUPS.reset);\n    });\n  };\n\n  init();\n\n  function addToCache(className, prop, value) {\n    if (!cache[prop]) {\n      cache[prop] = {};\n    }\n\n    cache[prop][value] = className;\n  }\n\n  function getClassName(prop, value) {\n    var val = (0, _compile.stringifyValueWithProperty)(value, prop);\n    return cache[prop] && cache[prop].hasOwnProperty(val) && cache[prop][val];\n  }\n\n  function _injectRegisteredStyle(id) {\n    var doLeftAndRightSwapInRTL = _I18nManager.default.doLeftAndRightSwapInRTL,\n        isRTL = _I18nManager.default.isRTL;\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr';\n\n    if (!inserted[dir][id]) {\n      var style = (0, _createCompileableStyle.default)((0, _i18nStyle.default)((0, _flattenStyle.default)(id)));\n      var results = (0, _compile.atomic)(style);\n      Object.keys(results).forEach(function (key) {\n        var _results$key = results[key],\n            identifier = _results$key.identifier,\n            property = _results$key.property,\n            rules = _results$key.rules,\n            value = _results$key.value;\n        addToCache(identifier, property, value);\n        rules.forEach(function (rule) {\n          var group = _constants.STYLE_GROUPS.custom[property] || _constants.STYLE_GROUPS.atomic;\n          sheet.insert(rule, group);\n        });\n      });\n      inserted[dir][id] = true;\n    }\n  }\n  /**\n   * Resolves a React Native style object to DOM attributes\n   */\n\n\n  function resolve(style, classList) {\n    var nextClassList = [];\n    var props = {};\n\n    if (!style && !classList) {\n      return props;\n    }\n\n    if (Array.isArray(classList)) {\n      (0, _flattenArray.default)(classList).forEach(function (identifier) {\n        if (identifier) {\n          if (inserted.css[identifier] == null && resolved.css[identifier] != null) {\n            var item = resolved.css[identifier];\n            item.rules.forEach(function (rule) {\n              sheet.insert(rule, item.group);\n            });\n            inserted.css[identifier] = true;\n          }\n\n          nextClassList.push(identifier);\n        }\n      });\n    }\n\n    if (typeof style === 'number') {\n      // fast and cachable\n      _injectRegisteredStyle(style);\n\n      var key = createCacheKey(style);\n      props = _resolveStyle(style, key);\n    } else if (!Array.isArray(style)) {\n      // resolve a plain RN style object\n      props = _resolveStyle(style);\n    } else {\n      // flatten the style array\n      // cache resolved props when all styles are registered\n      // otherwise fallback to resolving\n      var flatArray = (0, _flattenArray.default)(style);\n      var isArrayOfNumbers = true;\n      var cacheKey = '';\n\n      for (var i = 0; i < flatArray.length; i++) {\n        var id = flatArray[i];\n\n        if (typeof id !== 'number') {\n          isArrayOfNumbers = false;\n        } else {\n          if (isArrayOfNumbers) {\n            cacheKey += id + '-';\n          }\n\n          _injectRegisteredStyle(id);\n        }\n      }\n\n      var _key = isArrayOfNumbers ? createCacheKey(cacheKey) : null;\n\n      props = _resolveStyle(flatArray, _key);\n    }\n\n    nextClassList.push.apply(nextClassList, props.classList);\n    var finalProps = {\n      className: classListToString(nextClassList),\n      classList: nextClassList\n    };\n\n    if (props.style) {\n      finalProps.style = props.style;\n    }\n\n    return finalProps;\n  }\n  /**\n   * Resolves a React Native style object\n   */\n\n\n  function _resolveStyle(style, key) {\n    var doLeftAndRightSwapInRTL = _I18nManager.default.doLeftAndRightSwapInRTL,\n        isRTL = _I18nManager.default.isRTL;\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr'; // faster: memoized\n\n    if (key != null && resolved[dir][key] != null) {\n      return resolved[dir][key];\n    }\n\n    var flatStyle = (0, _flattenStyle.default)(style);\n    var localizedStyle = (0, _createCompileableStyle.default)((0, _i18nStyle.default)(flatStyle)); // slower: convert style object to props and cache\n\n    var props = Object.keys(localizedStyle).sort().reduce(function (props, styleProp) {\n      var value = localizedStyle[styleProp];\n\n      if (value != null) {\n        var className = getClassName(styleProp, value);\n\n        if (className) {\n          props.classList.push(className);\n        } else {\n          // Certain properties and values are not transformed by 'createReactDOMStyle' as they\n          // require more complex transforms into multiple CSS rules. Here we assume that StyleManager\n          // can bind these styles to a className, and prevent them becoming invalid inline-styles.\n          if (styleProp === 'animationKeyframes' || styleProp === 'placeholderTextColor' || styleProp === 'pointerEvents' || styleProp === 'scrollbarWidth') {\n            var _atomic;\n\n            var a = (0, _compile.atomic)((_atomic = {}, _atomic[styleProp] = value, _atomic));\n            Object.keys(a).forEach(function (key) {\n              var _a$key = a[key],\n                  identifier = _a$key.identifier,\n                  rules = _a$key.rules;\n              props.classList.push(identifier);\n              rules.forEach(function (rule) {\n                sheet.insert(rule, _constants.STYLE_GROUPS.atomic);\n              });\n            });\n          } else {\n            if (!props.style) {\n              props.style = {};\n            } // 4x slower render\n\n\n            props.style[styleProp] = value;\n          }\n        }\n      }\n\n      return props;\n    }, {\n      classList: []\n    });\n\n    if (props.style) {\n      props.style = (0, _compile.inline)(props.style);\n    }\n\n    if (key != null) {\n      resolved[dir][key] = props;\n    }\n\n    return props;\n  }\n\n  return {\n    getStyleSheet: function getStyleSheet() {\n      var textContent = sheet.getTextContent(); // Reset state on the server so critical css is always the result\n\n      if (!_ExecutionEnvironment.canUseDOM) {\n        init();\n      }\n\n      return {\n        id: _constants.STYLE_ELEMENT_ID,\n        textContent: textContent\n      };\n    },\n    createCSS: function createCSS(rules, group) {\n      var result = {};\n      Object.keys(rules).forEach(function (name) {\n        var style = rules[name];\n        var compiled = (0, _compile.classic)(style, name);\n        Object.keys(compiled).forEach(function (key) {\n          var _compiled$key = compiled[key],\n              identifier = _compiled$key.identifier,\n              rules = _compiled$key.rules;\n          resolved.css[identifier] = {\n            group: group || _constants.STYLE_GROUPS.classic,\n            rules: rules\n          };\n          result[name] = identifier;\n        });\n      });\n      return result;\n    },\n    resolve: resolve,\n    sheet: sheet\n  };\n}\n/**\n * Misc helpers\n */\n\n\nvar createCacheKey = function createCacheKey(id) {\n  var prefix = 'rn';\n  return prefix + \"-\" + id;\n};\n\nvar classListToString = function classListToString(list) {\n  return list.join(' ').trim();\n};\n\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}